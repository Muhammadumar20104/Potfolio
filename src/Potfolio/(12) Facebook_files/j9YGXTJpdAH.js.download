;/*FB_PKG_DELIM*/

__d("LSClearTables",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(a){return b.seq([function(a){return b.fe(b.db.table(67).fetch(),function(a){return a["delete"]()})},function(a){return b.fe(b.db.table(66).fetch(),function(a){return a["delete"]()})},function(a){return b.fe(b.db.table(65).fetch(),function(a){return a["delete"]()})},function(a){return b.fe(b.db.table(69).fetch(),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSInsertRankingContacts",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("limit",a[0]),d[1]=c.createArray(),d[5]=(d[1].push("search_contacts"),d[1]),d[2]=c.i64.of_float(Date.now()),d[5]=(d[1].push(c.i64.to_string(d[2])),d[1]),d[3]=c.toJSON(d[1]),d[4]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),d[3],c.i64.cast([0,452]),d[4],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSIssueSearchQuery",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.db.table(67).fetch([[[a[0]]]]).next().then(function(e,g){g=e.done;e=e.value;return g?c.seq([function(b){return d[1]=c.i64.of_float(Date.now()),c.db.table(67).add({query:a[0],statusPrimary:c.i64.cast([0,1]),statusSecondary:c.i64.cast([0,1]),startTimeMs:d[1]})},function(e){return d[2]=new c.Map(),d[2].set("query",a[0]),d[2].set("supported_types",a[1]),d[2].set("session_id",a[2]),d[2].set("surface_type",a[3]),d[2].set("group_id",a[4]),d[2].set("community_id",a[6]),d[2].set("thread_id",a[5]),d[3]=c.createArray(),d[9]=(d[3].push("search_primary"),d[3]),d[4]=c.i64.of_float(Date.now()),d[9]=(d[3].push(c.i64.to_string(d[4])),d[3]),d[5]=c.toJSON(d[3]),d[6]=c.toJSON(d[2]),c.sp(b("LSIssueNewTask"),d[5],c.i64.cast([0,30]),d[6],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]))},function(e){return d[7]=new c.Map(),d[7].set("query",a[0]),d[7].set("supported_types",a[1]),d[7].set("session_id",a[2]),d[7].set("surface_type",a[3]),d[7].set("group_id",a[4]),d[7].set("community_id",a[6]),d[7].set("thread_id",a[5]),d[8]=c.toJSON(d[7]),c.sp(b("LSIssueNewTask"),"search_secondary",c.i64.cast([0,31]),d[8],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]))}]):(e.item,0)})},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("MessengerGroup.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsxs("svg",babelHelpers["extends"]({fill:"currentColor",viewBox:"0 0 26 19",width:"1em",height:"1em"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("path",{d:"M13 10c-2.13 0-3.96-1.5-3.96-4.75C9.04 2.6 10.71.83 13 .83c2.3 0 3.96 1.77 3.96 4.42C16.96 8.51 15.13 10 13 10zm6.62 8.33c.57 0 .88-.5.88-1.1 0-3.08-3.47-5.56-7.5-5.56-4.03 0-7.5 2.48-7.5 5.55 0 .62.3 1.11.88 1.11h13.24zm2.55-7.5c-1.57 0-2.92-1.08-2.92-3.45 0-1.93 1.23-3.21 2.92-3.21s2.91 1.28 2.91 3.21c0 2.37-1.34 3.45-2.91 3.45zm.81 6.67a.83.83 0 0 1-.83-.72l-.01-.11a6.3 6.3 0 0 0-1.7-3.65c-.2-.22-.14-.57.14-.67a4.95 4.95 0 0 1 1.59-.27c1.66 0 3.33.84 3.33 2.5 0 2.92-2.08 2.92-2.08 2.92h-.44zM.92 7.38c0 2.37 1.34 3.45 2.91 3.45s2.92-1.08 2.92-3.45c0-1.93-1.23-3.21-2.92-3.21S.92 5.45.92 7.38zm2.1 10.12h-.44S.5 17.5.5 14.58c0-1.66 1.67-2.5 3.33-2.5.54 0 1.08.1 1.6.27.27.1.33.45.13.67a6.3 6.3 0 0 0-1.7 3.65l-.01.1a.83.83 0 0 1-.83.73z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MWChatSearchTypeheadActionButtonViewItem.react",["CometSkittleIcon.react","CometTypeaheadViewItem.react","MWXText.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry,d=a.icon,e=a.onHighlightEntry,f=a.onPressEntry;a=a.title;d=h.jsx(c("CometSkittleIcon.react"),{color:"gray",icon:d,size:36});return h.jsx("div",{className:"xe8uvvx xexx8yu xsyo7zv x18d9i69 x16hj40l",role:"listbox",children:h.jsx(c("CometTypeaheadViewItem.react"),{entry:b,isActive:!1,itemStartContent:d,onHighlightEntry:e,onPressEntry:f,role:"option",children:h.jsx(c("MWXText.react"),{type:"body3",children:a})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWLoggerEntrypoint",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=c("gkx")("1968579"),d=null;a!==void 0&&(a==="Inbox"?d=b?"messengerdotcom":"fb_groups:comet_www_inbox":a==="ChatTab"?d="fb_groups:comet_www_chat":a==="FullscreenChat"&&(d="fb_groups:comet_www_fullscreen_chat"));return d}g["default"]=a}),98);
__d("MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react",["fbt","$InternalEnum","GroupsCometChatsEngagementLogger","GroupsCometGlobalChatCreationDialog.entrypoint","LSThreadAttributionStore.bs","MWChatSearchTypeheadActionButtonViewItem.react","MWLSThreadDisplayContext","MessengerGroup.svg.react","emptyFunction","react","useGroupsCometChatsEngagementImpressionLogger","useMWLoggerEntrypoint","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=b("$InternalEnum")({CHAT_HEAD:"bottom_chat_create",JEWEL:"top_chat_create"});function a(){var a=c("useMWXEntryPointDialog")(c("GroupsCometGlobalChatCreationDialog.entrypoint"),{}),b=a[0],e=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),f=c("useMWLoggerEntrypoint")(e);a=d("LSThreadAttributionStore.bs").getSourceForNewThread();var g=a==="chatheadsNewMessage"?j.CHAT_HEAD:a==="jewelNewMessage"?j.JEWEL:null;a=c("useGroupsCometChatsEngagementImpressionLogger")({client_extras:{entry_point:(a=f)!=null?a:"",origin:(a=g)!=null?a:""},event:"community_chat_button_impression",surface:"chat_creation_template_list"});return i.jsx("div",{ref:a,children:i.jsx(c("MWChatSearchTypeheadActionButtonViewItem.react"),{entry:{key:"newCommunityChat",label:"New Community Chat",type:"entry"},icon:c("MessengerGroup.svg.react"),onHighlightEntry:c("emptyFunction"),onPressEntry:function(){var a;b({entrypoint:f!=null?f:void 0,shouldCloseComposeTab:e==="ChatTab",shouldGoToMessenger:e==="Inbox"},function(){});d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{entry_point:(a=f)!=null?a:"",origin:(a=g)!=null?a:""},event:"create_cc_button_clicked",source:"create_cc_button",surface:"chat_creation_template_list"})},title:h._("__JHASH__Wh17zqow6GS__JHASH__")})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWCMLightSpeedChatTabActionViewItems.react",["CometDivider.react","CurrentEnvironment","MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react","cr:6189","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={divider:{marginTop:"x1xmf6yo",marginEnd:"xktsk01",marginBottom:"x1e56ztr",marginStart:"x1d52u69",$$css:!0}};function a(){var a=c("gkx")("5449")&&!c("CurrentEnvironment").messengerdotcom,d=c("gkx")("8213");d=a||d;return d?h.jsxs(h.Fragment,{children:[a&&h.jsx(c("MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react"),{}),b("cr:6189")&&h.jsx(b("cr:6189"),{}),h.jsx(c("CometDivider.react"),{xstyle:i.divider})]}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSSearchType",[],(function(a,b,c,d,e,f){a=Object.freeze({CONTACT:1,NONCONTACT:2,GROUP:3,PAGE:4,INTEGRATED_MESSAGE_SEARCH_THREAD:5,IG_CONTACT_FOLLOWING:6,IG_CONTACT_NONFOLLOWING:7,IG_NONCONTACT_FOLLOWING:8,IG_NONCONTACT_NONFOLLOWING:9,IG_BUSINESS:10,TAM_CONTACT:11,TAM_THREAD:12,COMMUNITY_MESSAGING_THREAD:13,RECOMMENDED_COMMUNITIES:14,SECTION_HEADER:15,AI_BOT:16,COMMUNITIES:17});f["default"]=a}),66);
__d("MWJewelSearchTypeaheadHelper.bs",["I64","LSIntEnum","LSSearchType"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case c("LSSearchType").CONTACT:return 0;case c("LSSearchType").NONCONTACT:return 1;case c("LSSearchType").GROUP:return 2;case c("LSSearchType").PAGE:return 3;case c("LSSearchType").INTEGRATED_MESSAGE_SEARCH_THREAD:return 4;case c("LSSearchType").IG_BUSINESS:return 6;default:return 5}}function a(a){var b=d("I64").to_int32(a.threadType),c=d("I64").to_int32(a.type_),e;switch(c){case 0:e=1;break;case 1:e=2;break;case 2:e=3;break;case 3:e=9;break;case 4:e=14;break;case 5:e=7;break;case 6:e=15;break;case 7:e=6;break;default:e=7}return{queryString:a.query,resultFbid:a.resultId,resultIndex:d("I64").to_string(a.globalIndex),resultType:h(d("LSIntEnum").unwrapIntEnum(a.type_)),threadType:d("I64").to_int32(a.threadType),transportType:b!==0?b!==1?3:2:1,universalSearchResultType:e}}g.getResultType=h;g.getLoggingValues=a}),98);
__d("MWChatSearchResultType",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({GROUP:"group",MESSAGE:"message",MESSAGES:"messages",PAGE:"page",USER:"user"});f["default"]=a}),66);
__d("LsSearchStandardResultType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({USER_CONTACT:0,USER_NON_CONTACT:1,GROUP:2,PAGE:3,INTEGRATED_MESSAGE_SEARCH_THREAD:4,UNKNOWN:5,IG_BUSINESS:6,XAC_GROUP:7});c=a;f["default"]=c}),66);
__d("LsUniversalSearchEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("92");b=d("FalcoLoggerInternal").create("ls_universal_search_end",a);e=b;g["default"]=e}),98);
__d("LsUniversalSearchResultSelectedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("95");b=d("FalcoLoggerInternal").create("ls_universal_search_result_selected",a);e=b;g["default"]=e}),98);
__d("LsUniversalSearchThreadType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({ARMADILLO:0,TINCAN:1,OPEN_THREAD:2});c=a;f["default"]=c}),66);
__d("LsUniversalSearchUISectionType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NULL_STATE_RECENTS:0,NULL_STATE_SUGGESTED:1,NULL_STATE_FOLLOWING_ON_INSTAGRAM:2,QUERY_BLENDED:3,QUERY_BUSINESSES:4,QUERY_MORE_PEOPLE:5,QUERY_MESSAGES:6,QUERY_FOLLOWING_ON_INSTAGRAM:7,MORE_PEOPLE_MESSENGER:8,MORE_PEOPLE_INSTAGRAM:9,NULL_STATE_PHOTOS_AND_MEDIA:10,NULL_STATE_LINKS:11,NULL_STATE_LOCATIONS:12,NULL_STATE_ATTACHMENTS:13});c=a;f["default"]=c}),66);
__d("SearchStandardResultType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({CONTACT:1,NON_CONTACT:2,GROUP:3,XAC_CONTACT:4,XAC_NON_CONTACT:5,XAC_GROUP:6,OTHER:7,SOFT_CONTACT:8,PAGE:9,GAME:10,SMS:11,SMS_GROUP:12,WHATSAPP:13,INTEGRATED_MESSAGE_SEARCH_THREAD:14,IG_BUSINESS:15,COMMUNITY_CHAT:16,REEL:17,PUBLIC_CHAT:18,UNJOINED_COMMUNITIES:19,UNJOINED_SOCIAL_CHANNEL:20,JOINED_SOCIAL_CHANNEL:21,UNJOINED_BROADCAST_CHANNEL:22,JOINED_BROADCAST_CHANNEL:23,UNJOINED_SUBSCRIBER_SOCIAL_CHANNEL:24,JOINED_SUBSCRIBER_SOCIAL_CHANNEL:25,UNJOINED_SUBSCRIBER_BROADCAST_CHANNEL:26,JOINED_SUBSCRIBER_BROADCAST_CHANNEL:27,MOST_ENGAGED_FOLLOWERS:28,MOST_RECENT_FOLLOWERS:29,DIRECT_INVITE_MIX_TYPES:30,BROADCAST_FLOW_CHAT:31,UNJOINED_COMMUNITY_CHAT:32,AI_AGENT:33,COMMUNITIES:34});c=a;f["default"]=c}),66);
__d("SearchTransportType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({ARMADILLO:1,TINCAN:2,OPEN_THREAD:3,IG_DJANGO:4,IG_ADVANCED_CRYPTO_TRANSPORT:5,IG_MESSENGER_INFRA:6});c=a;f["default"]=c}),66);
__d("UniversalSearchEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("844");b=d("FalcoLoggerInternal").create("universal_search_end",a);e=b;g["default"]=e}),98);
__d("UniversalSearchResultSelectedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("846");b=d("FalcoLoggerInternal").create("universal_search_result_selected",a);e=b;g["default"]=e}),98);
__d("UniversalSearchUISectionType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NULL_STATE_RECENTS:1,NULL_STATE_RECENTS_SEE_ALL:2,NULL_STATE_SUGGESTED:3,NULL_STATE_XAC_FOLLOWING:4,QUERY_SUGGESTED:5,QUERY_NON_FOLLOWING:6,QUERY_XAC_FOLLOWING:7,QUERY_XAC_NON_FOLLOWING:8,QUERY_BUSINESSES:9,QUERY_MESSAGES:10,OTHER:11,QUERY_NON_BUSINESSES:12,COMMUNITY_CHATS:13,MORE_COMMUNITY_CHATS:14,RELEVANT_SHARES:15,LATEST_SHARES:16,RECOMMENDED_COMMUNITIES:17,COMMUNITIES_AND_MORE:18,CHANNELS:19,NULL_STATE_NON_FOLLOWING:20,JOINED_CM_AND_CHANNEL:21,JOINED_CM_AND_CHANNEL_SEE_MORE:22,RECOMMENDED_CM_AND_CHANNEL:23,RECOMMENDED_CM_AND_CHANNEL_SEE_MORE:24,AI:25,AI_SEE_MORE:26,CHANNELS_SEE_MORE:27,UNJOINED_COMMUNITY_CHATS:28,MORE_UNJOINED_COMMUNITY_CHATS:29});c=a;f["default"]=c}),66);
__d("MWSearchLogging",["$InternalEnum","LsUniversalSearchEndFalcoEvent","LsUniversalSearchResultSelectedFalcoEvent","LsUniversalSearchThreadType","MWCMIsAnyCMThread","MWJewelSearchTypeaheadHelper.bs","SearchStandardResultType","SearchTransportType","UniversalSearchEndFalcoEvent","UniversalSearchResultSelectedFalcoEvent","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({CM_THREADS:"cm_threads",UNJOINED_GROUPS:"unjoined_groups",NON_CONTACTS:"non_contacts",PAGES:"pages",CONTACTS_GROUPS:"contacts_groups"}),i=function(a){if(a==="offline"||a==="offline_nullstate"||a==="secure")return[0];return a==="server"?[1,2]:[]};function j(a){return a===!0?1:3}function k(a){return a===!0?0:2}function l(a){var b=a.searchSource,c=a.section;a=a.sectionAnalyticsName;if(b!=="server"||c==="")return 3;b=h.cast(a);if(b==null)return 3;switch(b){case h.CM_THREADS:case h.CONTACTS_GROUPS:return 3;case h.NON_CONTACTS:return 5;case h.PAGES:return 4;default:return 4}}function m(a,b){var c=b.searchSource,d=b.section;b=b.sectionAnalyticsName;if(a==="")return 3;if(c!=="server"||d==="")return 5;a=h.cast(b);if(a==null)return 11;switch(a){case h.CM_THREADS:return 13;case h.CONTACTS_GROUPS:return 5;case h.NON_CONTACTS:return 6;case h.PAGES:return 9;default:return 11}}e=function(a){var b=a.resultType;a=a.threadType;a=a!=null&&c("MWCMIsAnyCMThread")(a);switch(b){case"group":return a?16:3;case"page":return 9;case"user":return 1;case"messages":return 14;default:return 7}};var n=function(a){switch(a){case"group":return 2;case"page":return 3;case"user":return 0;case"messages":return 4;default:return 5}};function o(a){return((a=a)!=null?a:-1).toString()}function p(a,b,e,f){var g=e.rawData;e=g.id;var h=g.isE2EE,j=g.renderIndex,m=g.resultType,o=g.searchSource,p=g.serverSearchResult,q=((j=j)!=null?j:-1).toString(),r=e,s=n(m),t=k(h);if(p!=null){j=d("MWJewelSearchTypeaheadHelper.bs").getLoggingValues(p);s=j.resultType;t=(e=c("LsUniversalSearchThreadType").cast(j.threadType))!=null?e:t;r=(m=j.resultFbid)!=null?m:r}c("LsUniversalSearchResultSelectedFalcoEvent").log(function(){return{data_sources:i(o),instance_id:a,recipient_ids:f,result_index_without_header:q,search_result:{query_string:b,result_fbid:r,result_index:q,result_type:s},thread_type:t,ui_section:l(g)}});c("LsUniversalSearchEndFalcoEvent").log(function(){return{end_action:6,instance_id:a,recipient_ids:f,thread_type:k(h)}})}function a(a,b,e,f,g){p(a,b,e,f);var h=e.rawData;f=h.id;e=h.isE2EE;var k=h.isEPD,l=h.renderIndex,n=h.searchSource,q=h.serverSearchResult,r=o(l),s=f,t=7,u=j(e);if(q!=null){l=d("MWJewelSearchTypeaheadHelper.bs").getLoggingValues(q);s=l.resultFbid;u=(f=c("SearchTransportType").cast(l.transportType))!=null?f:u;t=(e=c("SearchStandardResultType").cast(l.universalSearchResultType))!=null?e:t}c("gkx")("4370")&&(c("UniversalSearchResultSelectedFalcoEvent").log(function(){return{data_sources:i(n),is_epd:c("gkx")("4438")||k,search_result:{query_string:b,result_fbid:s,result_index:r,result_type:t},session_id:a,transport_type:u,ui_section:m(b,h)}}),g.current||(c("UniversalSearchEndFalcoEvent").log(function(){return{end_action:7,is_epd:c("gkx")("4438")||k,session_id:a,transport_type:u}}),g.current=!0))}g.getDataSources=i;g.getTransportType=j;g.getLsTransportType=k;g.mapSectionToLsUniversalSearchUISection=l;g.mapSectionToUniversalSearchUISection=m;g.mapResultTypeToSearchStandardResultType=e;g.logResultSelected=a}),98);
__d("MessengerDebugOverlay.react",["fbt","I64","MessagingThreadType","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j={debug_overlay_block:{marginTop:"xr9ek0c",marginBottom:"xjpr12u",$$css:!0}},k=function(a){var b=Object.entries(c("MessagingThreadType")).filter(function(b){return b[1]===a});return b[0][0]};function a(a){a=a.rawData;var b="undefined";a.serverSearchResult!=null&&(b=k(d("I64").to_int32(a.serverSearchResult.threadType)));return i.jsxs("div",{style:j.debug_overlay_block,children:[i.jsxs("div",{children:[h._("__JHASH__XTPGN7Q8teR__JHASH__"),a.resultType]}),i.jsxs("div",{children:[h._("__JHASH__pgUGKyy7T9Y__JHASH__"),a.isE2EE.toString()]}),i.jsxs("div",{children:[h._("__JHASH__5mWNwl5tmCu__JHASH__"),b]}),i.jsxs("div",{children:[h._("__JHASH__1pE0r5N9DqF__JHASH__"),a.id]}),i.jsxs("div",{children:[h._("__JHASH__tpp9hyXFA_k__JHASH__"),d("I64").to_string((b=a.threadType)!=null?b:d("I64").neg_one)]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("UniversalSearchImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("845");b=d("FalcoLoggerInternal").create("universal_search_impression",a);e=b;g["default"]=e}),98);
__d("useUniversalSearchImpressionFalcoEvent",["MWSearchLogging","UniversalSearchImpressionFalcoEvent","emptyFunction","gkx","react","usePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function a(a){var b=a.cmGroupId,e=a.entry,f=a.instanceId,g=a.isCommunityChat,i=a.queryString,j=e.rawData;a=j.id;var k=j.isE2EE,l=j.isEPD;e=j.renderIndex;var m=j.searchSource;a=a;var n=a,o=((a=e)!=null?a:-1).toString();e=h(function(){if(f==null)return;c("UniversalSearchImpressionFalcoEvent").log(function(){return{cm_group_id:b,data_sources:d("MWSearchLogging").getDataSources(m),impression_selected:!1,is_epd:l,search_result:{query_string:i,result_fbid:n,result_index:o,result_type:d("MWSearchLogging").mapResultTypeToSearchStandardResultType(j)},session_id:f,transport_type:d("MWSearchLogging").getTransportType(k),ui_section:d("MWSearchLogging").mapSectionToUniversalSearchUISection(i,j)}})},[b,m,l,i,n,o,j,f,k]);return c("usePartialViewImpression")({onImpressionStart:g||c("gkx")("4370")?e:c("emptyFunction")})}g["default"]=a}),98);
__d("MWJewelSearchTypeaheadViewItem.react",["fbt","ix","CometMiddot.react","CometPageVerificationIcon.react","CometTypeaheadViewItem.react","ConstUriUtils","CurrentEnvironment","I64","LSIntEnum","LSMessagingThreadTypeUtil","LSSearchType","MAWGating","MAWThreadCutover","MWCMIsAnyCMThread","MWChatFacepile.react","MWChatProfile.react","MWChatSearchResultType","MWSearchLogging","MWXIcon.react","MWXText.react","MWXTextPairing.react","MessengerDebugOverlay.react","QPLUserFlow","UniversalSearchResultSelectedFalcoEvent","XCometMessengerControllerRouteBuilder","XMessengerDotComCometMainControllerRouteBuilder","cr:4538","cr:4539","cr:7325","deferredLoadComponent","fbicon","gkx","qpl","react","requireDeferred","useCometMessengerhasDefaultThreadOneToOneCapability","useCometRouterDispatcher","useReStore","useUniversalSearchImpressionFalcoEvent"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=d("react").useState,l=c("deferredLoadComponent")(c("requireDeferred")("MAWChatVerifyCutover.react").__setRef("MWJewelSearchTypeaheadViewItem.react")),m=d("MAWGating").isTlcSearchEnabled(),n={contentRoot:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",marginTop:"xdj266r",marginBottom:"xat24cr",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",":hover_backgroundColor":"x8du52y",$$css:!0},searchIcon:{paddingTop:"x123j3cw",paddingEnd:"x1mpkggp",paddingBottom:"xs9asl8",paddingStart:"x1t2a60a",$$css:!0},verifiedBadge:{paddingStart:"xurb0ha",$$css:!0}},o=function(a){var b=c("useReStore")(),e=d("MAWThreadCutover").useIsCutoverSecureThread(a);b=c("useCometMessengerhasDefaultThreadOneToOneCapability")(b,a);return e||b},p=function(a){if(a!=null){a=a.loggingSessionId;return a}return null};function a(a){var e=a.entry,f=a.extraViewItemProps,g=a.onPressEntry,q=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","extraViewItemProps","onPressEntry","queryString"]);var r=e.rawData,s=r.communityId,t=r.id,u=r.imageUrl,v=r.isE2EE,w=r.isInstagramAccount,x=r.isInteropEligible,y=r.resultType,z=r.secondaryImageUrl,A=r.section,B=r.serverSearchResult,C=r.subtext,D=r.threadType;r=r.verificationStatus;s=s!=null?d("I64").of_string_opt(s):null;var E=b("cr:4538")==null?void 0:b("cr:4538")(),F=b("cr:4539")==null?void 0:b("cr:4539")({onSuccess:function(a){return E==null?void 0:E(a)}}),G=D!=null&&c("MWCMIsAnyCMThread")(D),H=p(f);f=c("useUniversalSearchImpressionFalcoEvent")({entry:e,instanceId:H,isCommunityChat:G,queryString:q});var I=c("useCometRouterDispatcher")(),J=(B==null?void 0:B.threadType)!=null&&(d("I64").to_int32(B.threadType)===151||d("I64").to_int32(B.threadType)===155&&c("gkx")("6661"))&&(B==null?void 0:B.type_)!=null&&d("I64").to_int32(B.type_)===c("LSSearchType").RECOMMENDED_COMMUNITIES&&(B==null?void 0:B.threadJoinLinkHash)!=null,K=(B==null?void 0:B.threadType)!=null&&d("LSIntEnum").toNumber(B.threadType)===153,L=o(d("I64").of_string_opt(t));v=v&&!L?h._("__JHASH__PXg4X26-RXS__JHASH__"):C;L=D?d("LSMessagingThreadTypeUtil").isOneToOne(D):!1;C=G&&s!=null&&b("cr:7325")?j.jsx(b("cr:7325"),{chatPictureUrl:u,size:28,threadKey:s}):y==="messages"?j.jsx("div",{className:"x123j3cw x1mpkggp xs9asl8 x1t2a60a",children:j.jsx(c("MWXIcon.react"),{color:"primary",icon:d("fbicon")._(i("491284"),24),size:24})}):z!==""?L?j.jsx(c("MWChatProfile.react"),{size:36,src:z}):j.jsx(c("MWChatFacepile.react"),{firstParticipantURI:u,secondParticipantURI:z,size:36}):j.jsx(c("MWChatProfile.react"),{size:36,src:u});D=k();s=D[0];y=D[1];L=e.rawData.otherUserId;u=(z=s)!=null?z:t;s=(J||K)&&(B==null?void 0:B.threadJoinLinkHash)!=null?(D=d("ConstUriUtils").getUri(B==null?void 0:B.threadJoinLinkHash))==null?void 0:D.getPath().split("/").reverse()[1]:void 0;var M=c("CurrentEnvironment").facebookdotcom?c("XCometMessengerControllerRouteBuilder").buildURL({link_hash:s,thread_key:u}):c("XMessengerDotComCometMainControllerRouteBuilder").buildURL({link_hash:s,thread_key:u});z=e.rawData.resultType===c("MWChatSearchResultType").USER||e.rawData.resultType===c("MWChatSearchResultType").GROUP;D=babelHelpers["extends"]({},e,{key:u,rawData:babelHelpers["extends"]({},e.rawData,{id:u},L==null&&t!==u?{otherUserId:t}:{})});s=c("gkx")("8387");return j.jsx("div",{ref:f,children:j.jsxs(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:D,isDisabled:w===!0&&x===!1,itemStartContent:C,linkProps:{preventLocalNavigation:!0,url:M},onPressEntry:J?function(){(B==null?void 0:B.threadJoinLinkHash)!=null&&(F==null?void 0:F(B.threadJoinLinkHash))}:K?function(){I==null?void 0:I.go(M,{})}:function(a,b){g(a,b),G===!0?(c("QPLUserFlow").endSuccess(c("qpl")._(25312244,"1683")),H!=null&&c("UniversalSearchResultSelectedFalcoEvent").log(function(){var a;return{data_sources:d("MWSearchLogging").getDataSources(e.rawData.searchSource),is_epd:c("gkx")("4438")||e.rawData.isEPD,search_result:{query_string:q,result_fbid:e.rawData.id,result_index:((a=e.rawData.renderIndex)!=null?a:-1).toString(),result_type:7},session_id:H,transport_type:3,ui_section:13}})):c("QPLUserFlow").endCancel(c("qpl")._(25312244,"1683"))},testid:void 0,xstyle:n.contentRoot,children:[m===!0&&z?j.jsx(l,{id:t.toString(),updateThreadKey:y}):null,j.jsx(c("MWXTextPairing.react"),{body:j.jsxs(c("MWXText.react"),{numberOfLines:1,type:"body3",children:[e.label,r!=null?j.jsx("span",{className:"xurb0ha",children:j.jsx(c("CometPageVerificationIcon.react"),{size:"small",verificationBadge:r})}):null]}),level:3,meta:v&&v!==""?j.jsxs(c("MWXText.react"),{numberOfLines:1,type:"meta4",children:[v,(A==null||A==="")&&Boolean(e.rawData.isInstagramAccount)?j.jsxs(j.Fragment,{children:[j.jsx(c("CometMiddot.react"),{}),"Instagram"]}):null]}):null}),s?j.jsx(c("MessengerDebugOverlay.react"),{rawData:D.rawData}):null]}))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWLSSearchIssueSearchQuerySupportedTypes.bs",["LSIntEnum","LSSearchType","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=[d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT),d("LSIntEnum").ofNumber(c("LSSearchType").GROUP),d("LSIntEnum").ofNumber(c("LSSearchType").PAGE),d("LSIntEnum").ofNumber(c("LSSearchType").NONCONTACT),d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_FOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_NONFOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_FOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_NONFOLLOWING)].concat(c("gkx")("6970")?[d("LSIntEnum").ofNumber(c("LSSearchType").RECOMMENDED_COMMUNITIES)]:[],c("gkx")("2096")?[d("LSIntEnum").ofNumber(c("LSSearchType").COMMUNITY_MESSAGING_THREAD)]:[]);b=[d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT),d("LSIntEnum").ofNumber(c("LSSearchType").GROUP),d("LSIntEnum").ofNumber(c("LSSearchType").PAGE),d("LSIntEnum").ofNumber(c("LSSearchType").NONCONTACT),d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_FOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_NONFOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_FOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_NONFOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").INTEGRATED_MESSAGE_SEARCH_THREAD)];e=[d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT),d("LSIntEnum").ofNumber(c("LSSearchType").GROUP),d("LSIntEnum").ofNumber(c("LSSearchType").PAGE),d("LSIntEnum").ofNumber(c("LSSearchType").NONCONTACT),d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_FOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_NONFOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_FOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_NONFOLLOWING)];f=[d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT)];var h=[d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT),d("LSIntEnum").ofNumber(c("LSSearchType").GROUP),d("LSIntEnum").ofNumber(c("LSSearchType").PAGE),d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_FOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_NONFOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_FOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_NONFOLLOWING)].concat(c("gkx")("5830")===!0?[d("LSIntEnum").ofNumber(c("LSSearchType").COMMUNITY_MESSAGING_THREAD)]:[]),i=[d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT),d("LSIntEnum").ofNumber(c("LSSearchType").NONCONTACT)],j=[d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT),d("LSIntEnum").ofNumber(c("LSSearchType").NONCONTACT),d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_FOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_NONFOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_FOLLOWING),d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_NONFOLLOWING)];d=[d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT),d("LSIntEnum").ofNumber(c("LSSearchType").GROUP),d("LSIntEnum").ofNumber(c("LSSearchType").NONCONTACT)];g.allSupportedTypes=a;g.allSupportedTypesWithMessageSearch=b;g.armadilloSupportedTypes=e;g.onlyContacts=f;g.broadcastFlowSupportedTypes=h;g.addParticipantBase=i;g.addParticipantXac=j;g.socialChannelsSupportedTypes=d}),98);
__d("createMWChatSearchTypeaheadDataEntry",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return{key:a.id,label:a.displayName,rawData:{communityId:a.communityId,defaultE2eeThreadOneToOne:a.defaultE2eeThreadOneToOne,defaultE2eeThreads:a.defaultE2eeThreads,displayName:a.displayName,hasCutoverThread:a.hasCutoverThread,id:a.id,igid:a.resultIgid,imageUrl:a.imageUrl,isContact:a.isContact,isE2EE:a.isE2EE,isEPD:a.isEPD,isGroupsXacEligible:Boolean(a.isGroupsXacEligible),isInstagramAccount:Boolean(a.isInstagramAccount),isInteropEligible:a.isInteropEligible!==!1,isViewerUnconnected:a.isViewerUnconnected,isWAEligible:a.isWAEligible,otherUserId:a.otherUserId,rankingScore:a.rankingScore,renderIndex:b,resultType:a.resultType,searchSource:a.searchSource,secondaryImageUrl:(b=a.secondaryImageUrl)!=null?b:"",section:a.section,serverSearchResult:a.serverSearchResult,subtext:a.subtext,supportsE2eeSpamdStorage:a.supportsE2eeSpamdStorage,threadType:a.threadType,verificationStatus:a.isVerified?"BLUE_VERIFIED":"NOT_VERIFIED",waAddressable:a.waAddressable,waEligibility:a.waEligibility},type:"entry"}}f["default"]=a}),66);
__d("MWChatSearchThreadCutover",["FBLogger","I64","ReQL","ReQLSuspense","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b){b=d("I64").of_string_opt(b);if(b==null)return!1;a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(a.table("cutover_threads")).getKeyRange(b),f.id+":27");return Boolean(a)};a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=d("I64").of_string_opt(b);if(b==null)return;var e=Boolean(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("cutover_threads")).getKeyRange(b)));if(e){e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("mi_act_mapping_table").index("jid")).getKeyRange(b)));if(e!=null)return d("I64").to_string(e==null?void 0:e.serverThreadKey);else{c("FBLogger")("Messenger Search").mustfix("Mapping of open thread not found in mi_act_mapping_table but found in cutover_threads table.");return}}return});return function(b,c){return a.apply(this,arguments)}}();e=function(a,b,c){var d=[],e=new Set();for(b of b)e.has(b.id)||(!c.has(b.resultType)||!h(a,b.id))&&(d.push(b),e.add(b.id));return d};g.getCutoverThreadKey=a;g.filterOutCutoverOpenThreadBasedOnSearchResultTypes=e}),98);
__d("MWChatSearchFilteringUtils",["I64","LSMessagingThreadTypeUtil","MWChatSearchResultType","MWChatSearchThreadCutover","Promise","asyncToGeneratorRuntime","hasDefaultThreadOneToOneCapability"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,d){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d,e){d===void 0&&(d=!1);e===void 0&&(e=!0);var f=a;d&&(f=a.filter(function(a){a.key;a=a.rawData;return a.isE2EE}));if(c==null)return f;var g=(yield b("Promise").all(f.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(yield i(a,c))return!1;return!d&&e&&(yield j(a,c))?!1:!0});return function(b){return a.apply(this,arguments)}}())));f=a.filter(function(a,b){return g[b]});return f});return h.apply(this,arguments)}function e(a){var b=[],c=new Set();a.forEach(function(a){c.has(a.key)||(b.push(a),c.add(a.key))});return b}function f(a,b){if(b!=null)return d("LSMessagingThreadTypeUtil").isSecure(b.threadType);return a!=null?a.isE2EE===!0:!1}function i(a,e){a=a.rawData;if(a.resultType!==c("MWChatSearchResultType").USER)return b("Promise").resolve(!1);var f=a.defaultE2eeThreadOneToOne,g=a.id;a=a.isE2EE;if(!a)return b("Promise").resolve(!1);return f===!0?b("Promise").resolve(!1):c("hasDefaultThreadOneToOneCapability")(d("I64").of_string_opt(g),e)}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e;a=a.rawData;if(a.resultType!==c("MWChatSearchResultType").USER&&a.resultType!==c("MWChatSearchResultType").GROUP)return!1;var f=a.otherUserId!=null;e=(e=a.otherUserId)!=null?e:a.id.toString();if(b==null)return!1;else b=(yield d("MWChatSearchThreadCutover").getCutoverThreadKey(b,e));e=b!=null;if(f){if(!e)return!1;return e&&a.id.toString()===b?!1:!0}else return e});return k.apply(this,arguments)}g.filterSearchResults=a;g.dedupeByThreadKey=e;g.getIsE2ee=f}),98);
__d("LSSearchGranularSurfaceType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNIVERSAL_ALL:1,UNIVERSAL_MORE_PEOPLE:2,UNIVERSAL_IG_FOLLOWING:3,UNIVERSAL_BUSINESS:4,UNIVERSAL_CM_THREADS:18,UNIVERSAL_AI_BOTS:28,UNIVERSAL_NULLSTATE_ALL:25,UNIVERSAL_NULLSTATE_CHANNELS:26,UNIVERSAL_NULLSTATE_PEOPLE:27,UNIVERSAL_QUERY_STATE_PEOPLE:29,UNIVERSAL_QUERY_STATE_MESSAGES:30,UNIVERSAL_QUERY_STATE_MEDIA:31,UNIVERSAL_QUERY_STATE_CHANNELS:32,OMNIPICKER:5,BROADCAST:6,BLOCK_LIST:7,IMPERSONATION_EVIDENCE:8,UNIVERSAL_IG_NONFOLLOWING:9,GROUPS:10,OMNIPICKER_ARMADILLO:11,RESTRICTED_LIST:12,CALLS_TAB:13,CM_INVITE_ALL_MEMBERS:14,INSTAGRAM_ALL:15,CM_MEMBER_LIST:16,CM_THREAD_PARTICIPANT_SEARCH:17,CM_COMMUNITY_CREATION_INVITE:19,CM_INVITE_FB_FRIENDS:20,CM_COMMUNITY_INVITE_ALL_MEMBERS:21,CM_COMMUNITY_INVITE_FB_FRIENDS:22,CM_PRIVATE_COMMUNITY_BROADCAST:23,DISCOVERABLE_CHAT_MAIN_INVITE:24});f["default"]=a}),66);
__d("MNetContactItemType",[],(function(a,b,c,d,e,f){a=Object.freeze({CONTACT:0,NON_CONTACT:1,GROUP:2,PAGE:3,BOT:4,GAME:5,IG_USER:6,IG_THREAD:7,STICKER:8,INTEROP_THREAD:9,MSGR_THREAD:10,TEXT_SUGGESTION:11,COMMUNITY_MESSAGING_THREAD:12,IG_PUBLIC_CHANNELS:13,SIDE_CONVERSATIONS_COMMUNITY_MESSAGING_THREAD:14,COMMUNITY_MESSAGING_THREAD_FOR_CC_SECTION:15,BROADCAST_CHAT:16,MSGR_PUBLIC_CHANNEL:17,MSGR_SOCIAL_CHANNEL:18});f["default"]=a}),66);
__d("LSInstagramE2EEEligibility",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:-1,INELIGIBLE:0,ELIGIBLE:1,REQUIRED:2,DUAL_SEND_ELIGIBLE:3,GROUPS_ELIGIBLE:4});f["default"]=a}),66);
__d("MWChatTemporarySearchResult.bs",["I64","LSContactBitOffset","LSContactType","LSContactViewerRelationship","LSInstagramE2EEEligibility","LSIntEnum","LSMessagingThreadTypeUtil","LSRestrictionType","LSSearchType","LSWhatsAppConnectStatus","MWLSContactTypeExactUtils","MWLSThreadTitle","getLSMediaContactProfilePictureUrl","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_FOLLOWING))||d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_NONFOLLOWING))||d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_FOLLOWING)))return!0;else return d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_NONFOLLOWING))}function i(a){if(d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT))||d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").NONCONTACT))||h(a))return"user";else if(d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").GROUP))||d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").RECOMMENDED_COMMUNITIES))||d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").COMMUNITY_MESSAGING_THREAD)))return"group";else if(d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").PAGE)))return"page";else if(d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").INTEGRATED_MESSAGE_SEARCH_THREAD)))return"message";else{c("recoverableViolation")("Unknown Search Result Type "+d("I64").to_string(a),"messenger_web_product");return"user"}}function a(a,b,e,f,g){var h=e.contactType,i=e.contactTypeExact,j=e.secondaryName;i=d("MWLSContactTypeExactUtils").isIgContact(i);j=i&&j!=null?j:"";var k=f!=null?[f.e2eeEligibility,!d("I64").equal(f.e2eeEligibility,d("LSIntEnum").ofNumber(c("LSInstagramE2EEEligibility").INELIGIBLE))]:[void 0,void 0];return{canViewerMessage:void 0,communityId:void 0,defaultE2eeThreadOneToOne:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(83),e),defaultE2eeThreads:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(80),e),displayName:e.name,hasCutoverThread:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(76),e),id:d("I64").to_string(e.id),imageUrl:c("getLSMediaContactProfilePictureUrl")(e),isContact:d("I64").equal(e.contactViewerRelationship,d("LSIntEnum").ofNumber(c("LSContactViewerRelationship").CONTACT_OF_VIEWER)),isE2EE:b===!0,isEligibleForCmInvite:void 0,isEPD:d("I64").equal(e.restrictionType,d("LSIntEnum").ofNumber(c("LSRestrictionType").DATA_PRIVACY)),isGroupsXacEligible:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(68),e),isInstagramAccount:i,isInteropEligible:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(67),e),isInvitedToCmChannel:void 0,isVerified:(b=d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(23),e))!=null?b:!1,isViewerUnconnected:d("LSContactBitOffset").hasWithDefault(d("LSIntEnum").ofNumber(64),e,!0),isWAEligible:k[1],otherUserId:void 0,rankingScore:a,restrictionType:void 0,resultIgid:(i=f==null?void 0:f.igId)!=null?i:void 0,resultType:d("I64").equal(h,d("LSIntEnum").ofNumber(c("LSContactType").USER))||!(d("I64").equal(h,d("LSIntEnum").ofNumber(c("LSContactType").PAGE))||d("I64").equal(h,d("LSIntEnum").ofNumber(c("LSContactType").PAGE_PERSONA)))?"user":"page",searchSource:g,secondaryImageUrl:void 0,section:"",serverSearchResult:void 0,subtext:j,supportsE2eeSpamdStorage:f!=null?f.supportsE2eeSpamdStorage:void 0,threadJoinLinkHash:void 0,threadKey:void 0,threadType:void 0,waAddressable:d("I64").equal(e.waConnectStatus,d("LSIntEnum").ofNumber(c("LSWhatsAppConnectStatus").WHATSAPP_ADDRESSABLE)),waEligibility:k[0]}}function j(a,b,c){var e=a.threadDescription,f=a.threadName;if(e!=null)return e;else if(f!=null&&f!=="")return d("MWLSThreadTitle").getDefaultThreadTitle(void 0,b,c,a.threadType).toString();else return""}function b(a,b,c,e,f,g,h){var i=j(a,c,g);return{canViewerMessage:void 0,communityId:void 0,defaultE2eeThreadOneToOne:void 0,defaultE2eeThreads:void 0,displayName:d("MWLSThreadTitle").getDefaultThreadTitle(a.threadName,c,g,a.threadType).toString(),hasCutoverThread:void 0,id:d("I64").to_string(a.threadKey),imageUrl:e,isContact:!1,isE2EE:d("LSMessagingThreadTypeUtil").isSecure(a.threadType),isEligibleForCmInvite:void 0,isEPD:!1,isGroupsXacEligible:void 0,isInstagramAccount:!1,isInteropEligible:void 0,isInvitedToCmChannel:void 0,isVerified:!1,isViewerUnconnected:void 0,isWAEligible:void 0,otherUserId:void 0,rankingScore:h,restrictionType:void 0,resultIgid:void 0,resultType:"group",searchSource:b,secondaryImageUrl:f,section:"",serverSearchResult:void 0,subtext:i,supportsE2eeSpamdStorage:void 0,threadJoinLinkHash:void 0,threadKey:a.threadKey,threadType:a.threadType,waAddressable:void 0,waEligibility:void 0}}function e(a,b,e){var f,g=d("I64").equal(a.type_,d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT)),j=h(a.type_);f=b!=null?(f=b.displayName)!=null?f:"":"";var k=a.defaultE2eeThreadOneToOne,l=a.defaultE2eeThreads,m=a.hasCutoverThread,n=a.isVerified,o=a.supportsE2eeSpamdStorage,p=a.waEligibility;return{canViewerMessage:a.canViewerMessage,communityId:a.communityId,defaultE2eeThreadOneToOne:k!==null?k:void 0,defaultE2eeThreads:l!==null?l:void 0,displayName:a.displayName,hasCutoverThread:m!==null?m:void 0,id:a.resultId,imageUrl:a.profilePicUrl,isContact:g,isE2EE:d("LSMessagingThreadTypeUtil").isSecure(a.threadType),isEligibleForCmInvite:void 0,isEPD:!1,isGroupsXacEligible:a.isGroupsXacEligible,isInstagramAccount:j,isInteropEligible:a.isInteropEligible,isInvitedToCmChannel:void 0,isVerified:n!=null?n:!1,isViewerUnconnected:a.isViewerUnconnected,isWAEligible:p!=null?!d("I64").equal(p,d("LSIntEnum").ofNumber(c("LSInstagramE2EEEligibility").INELIGIBLE)):void 0,otherUserId:void 0,rankingScore:void 0,restrictionType:a.restrictionType,resultIgid:a.resultIgid,resultType:i(a.type_),searchSource:e,secondaryImageUrl:a.secondaryProfilePicUrl,section:f,sectionAnalyticsName:b==null?void 0:b.analyticsName,serverSearchResult:a,subtext:g?"":a.contextLine,supportsE2eeSpamdStorage:o,threadJoinLinkHash:a.threadJoinLinkHash,threadKey:void 0,threadType:a.threadType,waAddressable:a.isWaAddressable,waEligibility:a.waEligibility}}g.checkIsInstagramAccount=h;g.getResultType=i;g.fromContact=a;g.fromThread=b;g.fromServerSearchResult=e}),98);
__d("MWChatSearchFetchCCRecommendations",["fbt","I64","LSIntEnum","LSMessagingThreadTypeUtil","LSSearchGranularSurfaceType","LSSearchType","MNetContactItemType","MWChatTemporarySearchResult.bs","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return d("I64").equal(b,d("LSIntEnum").ofNumber(c("LSSearchGranularSurfaceType").INSTAGRAM_ALL))?[]:l(yield j(a))});return i.apply(this,arguments)}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("cm_search_nullstate_metadata"))));return a.sort(function(a,b){a=a.score;b=b.score;return a===b?0:a>b?1:-1})});return k.apply(this,arguments)}function l(a){return a.map(function(a,b){var e=a.communityId,f=a.contextLine,g=a.score,i=a.scoreType,j=a.secondaryThreadPictureUrl,k=a.secondaryThreadPictureUrlFallback,l=a.threadKey,m=a.threadName,n=a.threadPictureUrl;a.threadPictureUrlFallback;var o=a.threadType;babelHelpers.objectWithoutPropertiesLoose(a,["communityId","contextLine","score","scoreType","secondaryThreadPictureUrl","secondaryThreadPictureUrlFallback","threadKey","threadName","threadPictureUrl","threadPictureUrlFallback","threadType"]);a={contactId:l,contactType:d("LSIntEnum").ofNumber(c("MNetContactItemType").COMMUNITY_MESSAGING_THREAD_FOR_CC_SECTION),score:g,scoreIndex:d("I64").of_int32(b),scoreType:i};return{canViewerMessage:void 0,communityId:e!=null?d("I64").to_string(e):"",displayName:m,id:d("I64").to_string(l),imageUrl:(b=(g=n)!=null?g:j)!=null?b:"",isContact:d("LSMessagingThreadTypeUtil").isOneToOne(o),isE2EE:d("LSMessagingThreadTypeUtil").isSecure(o),isEPD:!1,isInstagramAccount:!1,isVerified:!1,rankingScore:a,resultType:d("MWChatTemporarySearchResult.bs").getResultType(d("LSIntEnum").ofNumber(c("LSSearchType").COMMUNITY_MESSAGING_THREAD)),searchSource:"server",secondaryImageUrl:(e=(i=j)!=null?i:k)!=null?e:"",section:h._("__JHASH__FxJ-lhW-AAL__JHASH__").toString(),subtext:(m=f)!=null?m:"",threadJoinLinkHash:void 0,threadKey:l,threadType:o}})}g.fetchCCs=a;g.mapToSearchResults=l}),98);
__d("MWChatSearchFetchContactRecommendations",["I64","LSContactBitOffset","LSContactViewerRelationship","LSDatabaseSingleton","LSIntEnum","LSSearchType","LSWhatsAppConnectStatus","MNetContactItemType","MNetRankType","MWChatTemporarySearchResult.bs","MWLSContactTypeExactUtils","ReQL","ReQLSuspense","asyncToGeneratorRuntime","getLSMediaContactProfilePictureUrl","gkx","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function i(a){if(a<0)return-1;return a>0?1:0}function j(a){return a.sort(function(a,b){a=a[0];var c=a[0];a=a[1];b=b[0];var d=b[0];b=b[1];if(d.score!==c.score)return i(d.score-c.score);if(a!=null&&b!=null)return i(b.rank-a.rank);return b==null&&a==null?0:b!=null?1:-1})}function k(a){var b=a.contactTypeExact;a=a.contactViewerRelationship;if(d("MWLSContactTypeExactUtils").isIgContact(b)){if(d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSContactViewerRelationship").NOT_CONTACT)))return d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_FOLLOWING);return d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSContactViewerRelationship").CONTACT_OF_VIEWER))?d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_FOLLOWING):d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_NONFOLLOWING)}return d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT)}function l(a){return a.map(function(a,b){var e=a[0],f=e[0];e=e[1];a=a[1];if(e==null)return;var g=e.contactTypeExact;f=d("LSIntEnum").toNumber(f.contactType);var h;!c("gkx")("3711")&&d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(76),e)?h=15:h=f===c("MNetContactItemType").GROUP?2:1;var i;switch(f){case c("MNetContactItemType").CONTACT:i=k(e);break;case c("MNetContactItemType").GROUP:i=d("LSIntEnum").ofNumber(c("LSSearchType").GROUP);break;case c("MNetContactItemType").PAGE:case c("MNetContactItemType").BOT:case c("MNetContactItemType").GAME:case c("MNetContactItemType").STICKER:i=d("LSIntEnum").ofNumber(c("LSSearchType").PAGE);break;case c("MNetContactItemType").IG_THREAD:case c("MNetContactItemType").INTEROP_THREAD:case c("MNetContactItemType").MSGR_THREAD:i=d("LSIntEnum").ofNumber(c("LSSearchType").INTEGRATED_MESSAGE_SEARCH_THREAD);break;case c("MNetContactItemType").IG_USER:i=d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_FOLLOWING);break;default:i=d("LSIntEnum").ofNumber(c("LSSearchType").NONCONTACT)}f={blockedByViewerStatus:e.blockedByViewerStatus,contextLine:(f=e.secondaryName)!=null?f:"",defaultE2eeThreadOneToOne:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(83),e),defaultE2eeThreads:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(80),e),displayName:e.name,globalIndex:d("I64").of_int32(b),hasCutoverThread:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(76),e),isGroupsXacEligible:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(68),e),isInteropEligible:d("MWLSContactTypeExactUtils").isIgContact(g)?d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(67),e):void 0,isVerified:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(23),e),isViewerUnconnected:d("LSContactBitOffset").hasWithDefault(d("LSIntEnum").ofNumber(64),e,!0),isWaAddressable:d("I64").equal(e.waConnectStatus,d("LSIntEnum").ofNumber(c("LSWhatsAppConnectStatus").WHATSAPP_ADDRESSABLE)),profilePicUrl:c("getLSMediaContactProfilePictureUrl")(e),query:"",resultId:d("I64").to_string(e.id),resultIgid:a==null?void 0:a.igId,threadType:d("LSIntEnum").ofNumber(h),type_:i,waEligibility:a==null?void 0:a.e2eeEligibility};b=d("MWChatTemporarySearchResult.bs").fromServerSearchResult(f,void 0,"offline_nullstate");return[b,e]}).filter(Boolean)}function m(a,b){return d("ReQL").leftJoin(d("ReQL").leftJoin(d("ReQL").fromTableAscending(a.table("ranking_scores").index("scoreTypeContactId")).getKeyRange(b),d("ReQL").fromTableAscending(a.table("contacts"))),d("ReQL").fromTableAscending(a.table("ig_contact_info")))}function a(a){a===void 0&&(a=d("LSIntEnum").ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE));var b=c("useReStore")(),e=d("ReQLSuspense").useArray(function(){return m(b,a)},[a,b],f.id+":243");return h(function(){return l(j(e))},[e])}function e(a){a===void 0&&(a=d("LSIntEnum").ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE));return c("LSDatabaseSingleton").then(function(b){return d("ReQL").toArrayAsync(m(b,a))}).then(function(a){return l(j(a))})}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").toArrayAsync(m(a,b)));return l(j(a)).map(function(a){a=a[0];return a})});return o.apply(this,arguments)}g.sortInPlaceQueryResults=j;g.mapToServerSearchResults=l;g.makeQuery=m;g.useChatSearchContactRecommendations=a;g.fetchRecommendations=e;g.fetchContacts=n}),98);
__d("MWChatSearchFetchThreadRecommendations",["I64","LSDatabaseSingleton","LSMessagingThreadTypeUtil","MWInboxSecureContentSearch","MWLSThreadTitle","Promise","ReQL","asyncToGeneratorRuntime","hasDefaultThreadOneToOneCapability"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return d("ReQL").firstExnAsync(d("ReQL").fromTableAscending(a.table("_user_info")))}function i(a,b,c,e,f,g,h){var i=d("I64").to_float(b.lastActivityTimestampMs);i={contactId:d("I64").zero,contactType:d("I64").zero,score:i,scoreIndex:d("I64").zero,scoreType:d("I64").zero};return{defaultE2eeThreadOneToOne:(h=h)!=null?h:void 0,displayName:d("MWLSThreadTitle").getDefaultThreadTitle(b.threadName,a,c,b.threadType).toString(),hasCutoverThread:(h=g)!=null?h:void 0,id:d("I64").to_string(b.threadKey),imageUrl:e,isContact:!1,isE2EE:d("LSMessagingThreadTypeUtil").isSecure(b.threadType),isEPD:!1,isInstagramAccount:!1,isVerified:!1,rankingScore:i,resultType:d("LSMessagingThreadTypeUtil").isGroup(b.threadType)?"group":"user",searchSource:"offline_nullstate",secondaryImageUrl:f,section:"",subtext:(a=b.threadDescription)!=null?a:"",threadKey:b.threadKey,threadType:b.threadType}}function j(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(a.table("threads").index("parentThreadKeyLastActivityTimestampMs")).filter(function(a){return d("LSMessagingThreadTypeUtil").isRecentsSectionAllowedTypes(a.threadType)&&d("LSMessagingThreadTypeUtil").isMessengerOrE2EEInbox(a.folderName)}))}function a(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("LSDatabaseSingleton")),e=(yield b("Promise").all([h(a),j(a)])),f=e[0];e=e[1];return b("Promise").all(e.map(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var g=(yield b("Promise").all([d("MWInboxSecureContentSearch").getThreadPics(e,f.facebookUserId,a),d("MWInboxSecureContentSearch").getThreadParticipants(e,a),d("LSMessagingThreadTypeUtil").isOpenOneToOne(e.threadType)?d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("cutover_threads")).getKeyRange(e.threadKey)):null,d("LSMessagingThreadTypeUtil").isOpenOneToOne(e.threadType)?c("hasDefaultThreadOneToOneCapability")(e.threadKey,a):null])),h=g[0],j=g[1],k=g[2];g=g[3];var l=h[0];h=h[1];return i(f.facebookUserId,e,j,l,h,Boolean(k),g)});return function(a){return e.apply(this,arguments)}}()))});return k.apply(this,arguments)}g.fetchThreadRecommendations=a}),98);
__d("MWChatSearchIssueLightspeedQuery.bs",["I64","LSContactBlockedByViewerStatus","LSDatabaseSingleton","LSFactory","LSIntEnum","LSIssueSearchQuery","LSPlatformWaitForTaskCompletion","LSSearchGranularSurfaceType","LSSearchRequestStatusType","LSSearchType","LSVec","MWChatSearchFetchCCRecommendations","MWChatSearchFetchContactRecommendations","MWChatSearchFetchThreadRecommendations","MWChatSearchResultType","MWChatTemporarySearchResult.bs","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=a[1];a=a[0];var e=[],f=0;a.sort(function(a,b){return d("I64").compare(a.globalIndex,b.globalIndex)});c.sort(function(a,b){return d("I64").compare(a.globalIndex,b.globalIndex)});for(var g=0,h=a.length;g<h;++g){var i=a[g];while(f<c.length&&d("I64").ge(c[f].globalIndex,i.startIndex)&&d("I64").le(c[f].globalIndex,i.endIndex)){var j=c[f];e.push(d("MWChatTemporarySearchResult.bs").fromServerSearchResult(j,i,"server"));f=f+1|0}}return e.filter(function(a){if(b)return!0;else return a.resultType!=="group"})}var i={broadcast:d("LSIntEnum").ofNumber(c("LSSearchGranularSurfaceType").BROADCAST),cmCommunityInviteAllMembers:d("LSIntEnum").ofNumber(c("LSSearchGranularSurfaceType").CM_COMMUNITY_INVITE_ALL_MEMBERS),cmCommunityInviteFbFriends:d("LSIntEnum").ofNumber(c("LSSearchGranularSurfaceType").CM_COMMUNITY_INVITE_FB_FRIENDS),cmInviteAllMembers:d("LSIntEnum").ofNumber(c("LSSearchGranularSurfaceType").CM_INVITE_ALL_MEMBERS),cmInviteFbFriends:d("LSIntEnum").ofNumber(c("LSSearchGranularSurfaceType").CM_INVITE_FB_FRIENDS),cmMemberList:d("LSIntEnum").ofNumber(c("LSSearchGranularSurfaceType").CM_MEMBER_LIST),cmThreadParticipantSearch:d("LSIntEnum").ofNumber(c("LSSearchGranularSurfaceType").CM_THREAD_PARTICIPANT_SEARCH),instagramAll:d("LSIntEnum").ofNumber(c("LSSearchGranularSurfaceType").INSTAGRAM_ALL),omnipickerArmadillo:d("LSIntEnum").ofNumber(c("LSSearchGranularSurfaceType").OMNIPICKER_ARMADILLO),universal:d("LSIntEnum").ofNumber(c("LSSearchGranularSurfaceType").UNIVERSAL_ALL)};function j(a,b,d){var e=d.query;return c("LSDatabaseSingleton").then(function(d){return d.runInTransaction(function(d){return c("LSIssueSearchQuery")(e,c("LSVec").ofArray(a),void 0,b,void 0,void 0,void 0,c("LSFactory")(d))},"readwrite").then(function(){return d})})}function a(a,e,f,g,i){if(e.length>0&&!e.includes("server"))return b("Promise").resolve([]);else return c("LSDatabaseSingleton").then(function(b){return c("LSPlatformWaitForTaskCompletion")(b,function(b){return c("LSIssueSearchQuery")(i.query,c("LSVec").ofArray(a),void 0,f,void 0,void 0,void 0,c("LSFactory")(b))},"issueSearchQuery").then(function(){return b})}).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("server_search_results")).getKeyRange(i.query).filter(function(a){return d("I64").equal(a.blockedByViewerStatus,d("LSIntEnum").ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))}));a=d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("server_search_sections")).getKeyRange(i.query));a=(yield b("Promise").all([a,e]));return h(a,g)});return function(b){return a.apply(this,arguments)}}())}function e(a,c,e,f){return d("MWChatSearchFetchContactRecommendations").fetchRecommendations(f).then(function(a){return b("Promise").resolve(a.map(function(a){return a[0]}))})}function k(a,b){if(!b.has(a.resultType))return!0;if(!a.isE2EE&&a.defaultE2eeThreadOneToOne===!0)return!0;return a.hasCutoverThread===!0?!0:!1}function l(a){var b=[],c=new Set();a.forEach(function(a){c.has(a.id)||(b.push(a),c.add(a.id))});return b}function f(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("MWChatSearchFetchThreadRecommendations").fetchThreadRecommendations());if(a.length===0)return[];var b=new Set([c("MWChatSearchResultType").USER,c("MWChatSearchResultType").GROUP]);a=l(a);return a.filter(function(a){return!k(a,b)})});return m.apply(this,arguments)}function n(a,b,e,f){var g=[],i=[],j=[],k=function(){if(g.length===0||i.length===0||j.length!==1)return;d("I64").equal(j[0].statusPrimary,d("LSIntEnum").ofNumber(c("LSSearchRequestStatusType").PENDING))||f(h([i,g],e))},l=a.table("server_search_results").subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("server_search_results")).getKeyRange(b)),function(a){g=a;return k()})}),m=a.table("server_search_sections").subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("server_search_sections")).getKeyRange(b)),function(a){i=a;return k()})}),n=a.table("search_queries").subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("search_queries")).getKeyRange(b)),function(a){j=a;return k()})});return function(){l(),m(),n()}}function o(a,b,d,e,f,g){c("promiseDone")(j(b,d,f));return n(a,f.query,e,g)}function p(a,e,f,g,h,i,k,l){l===void 0&&(l=!1);c("promiseDone")(j(e,h,i));g=l&&e.includes(d("LSIntEnum").ofNumber(c("LSSearchType").COMMUNITY_MESSAGING_THREAD));c("promiseDone")(b("Promise").all([d("MWChatSearchFetchContactRecommendations").fetchContacts(a,f),g?d("MWChatSearchFetchCCRecommendations").fetchCCs(a,h):[]]).then(function(a){var b=a[0];a=a[1];return k(b.concat(a))}));return c("emptyFunction")}g.toSearchResults=h;g.Surfaces=i;g.fetchResults=a;g.fetchRecommendations=e;g.shouldFilterSearchResultsForSharingNS=k;g.dedupeByThreadKey=l;g.fetchThreadRecommendations=f;g.requestResults=o;g.requestRecommendations=p}),98);
__d("MWPSearchOfflineOpenConversations",["minisearch"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("minisearch"))({fields:["content"],searchOptions:{fuzzy:.2,prefix:!0},storeFields:["category"]});function a(a){return h.search(a)}function b(a){h.add(a)}function d(a){h.remove(a)}g.search=a;g.add=b;g.remove=d}),98);
__d("MWPSearchOfflineSearchTypes",[],(function(a,b,c,d,e,f){"use strict";a="Contact";b="ThreadName";c="ThreadParticipant";d={Contact:a,ThreadName:b,ThreadParticipant:c};f.MWPSearchType=d}),66);
__d("bs_belt_SortArray",["bs_belt_Array","bs_curry"],(function(a,b,c,d,e,f){"use strict";function g(a,b,c,d,e){while(!0){var f=c,g=b;if(f>=d)return f;var h=a[f];if(!e(h,g))return f;c=f+1|0;b=h;continue}}function h(a,b){var c=a.length;if(c===0||c===1)return c;var d=a[0],e=a[1];if(b(d,e)){var f=e,h=2;while(!0){var i=h,j=f;if(i>=c)return i;var k=a[i];if(!b(j,k))return i;h=i+1|0;f=k;continue}}else if(b(e,d))return-g(a,e,2,c,b)|0;else return 1}function a(a,c){return h(a,b("bs_curry").__2(c))}function i(a,b){var c=a.length;if(c===0)return!0;else{var d=0;c=c-1|0;while(!0){var e=d;if(e===c)return!0;if(b(a[e],a[e+1|0])>0)return!1;d=e+1|0;continue}}}function c(a,c){return i(a,b("bs_curry").__2(c))}function j(a,c,d,e,f,g,h,i,j){d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k;if(j(p,n)<=0){h[m]=p;p=q+1|0;if(p>=d)return b("bs_belt_Array").blitUnsafe(e,o,h,m+1|0,g-o|0);i=m+1|0;c=a[p];k=p;continue}h[m]=n;p=o+1|0;if(p>=g)return b("bs_belt_Array").blitUnsafe(a,q,h,m+1|0,d-q|0);i=m+1|0;f=e[p];l=p;continue}}function k(a,c,d,e,f,g,h,i,j){d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k,r=j(p,n);if(r<0){h[m]=p;var s=q+1|0,t=m+1|0;if(s<d){i=t;c=a[s];k=s;continue}b("bs_belt_Array").blitUnsafe(e,o,h,t,g-o|0);return(t+g|0)-o|0}if(r===0){h[m]=p;s=q+1|0;t=o+1|0;r=m+1|0;if(!(s<d&&t<g))if(s===d){b("bs_belt_Array").blitUnsafe(e,t,h,r,g-t|0);return(r+g|0)-t|0}else{b("bs_belt_Array").blitUnsafe(a,s,h,r,d-s|0);return(r+d|0)-s|0}i=r;f=e[t];l=t;c=a[s];k=s;continue}h[m]=n;p=o+1|0;r=m+1|0;if(p<g){i=r;f=e[p];l=p;continue}b("bs_belt_Array").blitUnsafe(a,q,h,r,d-q|0);return(r+d|0)-q|0}}function d(a,c,d,e,f,g,h,i,j){return k(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function l(a,b,c,d,e,f,g,h,i){c=b+c|0;f=e+f|0;var j=b;b=a[b];var k=e;e=d[e];h=h;while(!0){var l=h,m=e,n=k,o=b,p=j;m=i(o,m);if(m<0){var q=p+1|0;if(q>=c)return l;b=a[q];j=q;continue}if(m===0){g[l]=o;q=p+1|0;m=n+1|0;o=l+1|0;if(!(q<c&&m<f))return o;h=o;e=d[m];k=m;b=a[q];j=q;continue}p=n+1|0;if(p>=f)return l;e=d[p];k=p;continue}}function e(a,c,d,e,f,g,h,i,j){return l(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function m(a,c,d,e,f,g,h,i,j){d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k;n=j(p,n);if(n<0){h[m]=p;p=m+1|0;var r=q+1|0;if(r>=d)return p;i=p;c=a[r];k=r;continue}if(n===0){p=q+1|0;r=o+1|0;if(!(p<d&&r<g))if(p===d)return m;else{b("bs_belt_Array").blitUnsafe(a,p,h,m,d-p|0);return(m+d|0)-p|0}f=e[r];l=r;c=a[p];k=p;continue}n=o+1|0;if(n<g){f=e[n];l=n;continue}b("bs_belt_Array").blitUnsafe(a,q,h,m,d-q|0);return(m+d|0)-q|0}}function n(a,c,d,e,f,g,h,i,j){return m(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function o(a,b,c,d,e,f){for(var g=0;g<e;++g){var h=a[b+g|0],i=(d+g|0)-1|0;while(i>=d&&f(c[i],h)>0)c[i+1|0]=c[i],i=i-1|0;c[i+1|0]=h}}function p(a,b,c,d,e,f){if(e<=5)return o(a,b,c,d,e,f);var g=e/2|0;e=e-g|0;p(a,b+g|0,c,d+g|0,e,f);p(a,b,a,b+e|0,g,f);return j(a,b+e|0,g,c,d+g|0,e,c,d,f)}function q(a,b){var c=a.length;if(c<=5)return o(a,0,a,0,c,b);var d=c/2|0;c=c-d|0;var e=new Array(c);p(a,d,e,0,c,b);p(a,0,a,c,d,b);return j(a,c,d,e,0,c,a,0,b)}function r(a,c){return q(a,b("bs_curry").__2(c))}function s(a,b){a=a.slice(0);q(a,b);return a}function t(a,c){return s(a,b("bs_curry").__2(c))}function u(a,b,c){var d=a.length;if(d===0)return-1;var e=a[0];e=c(b,e);if(e<0)return-1;e=a[d-1|0];e=c(b,e);if(e>0)return-(d+1|0)|0;else{e=0;d=d-1|0;while(!0){var f=d,g=e,h=(g+f|0)/2|0,i=a[h];i=c(b,i);if(i===0)return h;if(i<0){if(f===h)if(c(a[g],b)===0)return g;else return-(f+1|0)|0;d=h;continue}if(g===h)if(c(a[f],b)===0)return f;else return-(f+1|0)|0;e=h;continue}}}function v(a,c,d){return u(a,c,b("bs_curry").__2(d))}var w,x;f.Int=w;f.$$String=x;f.strictlySortedLengthU=h;f.strictlySortedLength=a;f.isSortedU=i;f.isSorted=c;f.stableSortInPlaceByU=q;f.stableSortInPlaceBy=r;f.stableSortByU=s;f.stableSortBy=t;f.binarySearchByU=u;f.binarySearchBy=v;f.unionU=k;f.union=d;f.intersectU=l;f.intersect=e;f.diffU=m;f.diff=n}),null);
__d("MWPSearchOfflineOpenConversations.bs",["I64","LSContactBitOffset","LSInitSyncCompleteSubscription","LSIntEnum","LSMessagingThreadTypeUtil","MNetRankType","MWChatTemporarySearchResult.bs","MWInboxSecureContentSearch","MWPSearchOfflineOpenConversations","MWPSearchOfflineSearchTypes","Promise","ReQL","asyncToGeneratorRuntime","bs_belt_SortArray"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return"p__"+d("I64").to_string(a)+"__"+d("I64").to_string(b)}function h(a){a=a.split("__");var b=a.length;if(b!==3)return;else return[d("I64").of_string(a[1]),d("I64").of_string(a[2])]}function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a=(yield b("Promise").all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("contacts")).getKeyRange(d("I64").of_string(e))),d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("ig_contact_info")).getKeyRange(d("I64").of_string(e))),d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("ranking_scores")).getKeyRange(d("I64").of_string(e),d("LSIntEnum").ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH)))]));e=a[0];var f=a[1];a=a[2];if(e==null)return;if(e.isMemorialized!==!0&&!d("I64").equal(e.contactViewerRelationship,d("I64").one)&&d("I64").equal(e.blockedByViewerStatus,d("I64").zero)&&!d("LSContactBitOffset").hasWithDefault(d("LSIntEnum").ofNumber(66),e,!1)){return d("MWChatTemporarySearchResult.bs").fromContact((a=a)!=null?a:void 0,void 0,e,(a=f)!=null?a:void 0,"offline")}});return j.apply(this,arguments)}function k(a,c){return b("Promise").all([d("ReQL").firstExnAsync(d("ReQL").fromTableAscending(a.table("_user_info")).map(function(a){return a.facebookUserId})),d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("threads")).getKeyRange(d("I64").of_string(c)))]).then(function(c){var e=c[1];if(e!=null&&e.folderName==="inbox"){if(d("LSMessagingThreadTypeUtil").isChannelPreview(e.threadType))return b("Promise").resolve();var f=c[0];return b("Promise").all([d("MWInboxSecureContentSearch").getThreadPics(e,f,a),d("MWInboxSecureContentSearch").getThreadParticipants(e,a)]).then(function(a){var b=a[0],c=d("I64").to_float(e.lastActivityTimestampMs);c={contactId:d("I64").zero,contactType:d("I64").zero,score:c,scoreIndex:d("I64").zero,scoreType:d("I64").zero};return d("MWChatTemporarySearchResult.bs").fromThread(e,"offline",f,b[0],b[1],a[1],c)})}else return b("Promise").resolve()})}function l(a,b){a=a.rankingScore;a=a!=null?a.score:0;b=b.rankingScore;b=b!=null?b.score:0;if(b>a)return 1;else if(b<a)return-1;else return 0}function m(a,e){return b("Promise").all(e.map(function(c){var e=c.category;switch(e.type){case d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant:e=h(c.id);if(e!=null){e=e[0];return k(a,d("I64").to_string(e))}else return b("Promise").resolve();case d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName:return k(a,c.id);case d("MWPSearchOfflineSearchTypes").MWPSearchType.Contact:return i(a,c.id)}})).then(function(a){a=a.filter(Boolean);var b=c("bs_belt_SortArray").stableSortByU(a.filter(function(a){return a.resultType!=="group"}),l);a=c("bs_belt_SortArray").stableSortByU(a.filter(function(a){return a.resultType==="group"}),l);return b.concat(a)})}var n={contents:void 0};function e(a,c){var e=n.contents;if(e==null)return b("Promise").resolve([]);var f=d("MWPSearchOfflineOpenConversations").search(a).map(function(a){return a}).filter(function(a){if(c)return!0;a=a.category;switch(a.TAG){case 0:case 1:return!1;case 2:return!0}});return d("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(e,d("LSIntEnum").ofNumber(7)).then(function(){return m(e,f)})}function o(a,c,e){return d("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(a,d("LSIntEnum").ofNumber(7)).then(function(){return b("Promise").all(c.map(function(b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("ranking_scores")).getKeyRange(d("I64").of_string(b),e)).then(function(a){if(a!=null)return[b,a.score]})}))})}function f(a,b){return o(a,b,d("LSIntEnum").ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH))}g.getGroupParticipantKey=a;g.searchHelper=m;g.db=n;g.search=e;g.fetchRankingScoresKP=f}),98);
__d("MWChatSearchInsertRankingContacts.bs",["I64","LSFactory","LSInsertRankingContacts","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h={contents:!1},i={contents:!1},j=d("I64").of_string("100");function a(a){if(!h.contents&&d("I64").gt(j,d("I64").zero)){h.contents=!0;c("promiseDone")(a.runInTransaction(function(a){return c("LSInsertRankingContacts")(j,c("LSFactory")(a))},"readwrite"),function(){i.contents=!0});return}}function b(){return i.contents}g.insertRankingContacts=a;g.isDone=b}),98);
__d("MWLSSyncRankings",["LSIntEnum","MWLSDatabaseLazySync","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h={contents:!1},i={contents:!1};function a(a){if(!h.contents){h.contents=!0;c("promiseDone")(d("MWLSDatabaseLazySync").sync(a,d("LSIntEnum").ofNumber(7)),function(){i.contents=!0});return}}function b(){return i.contents}g.sync=a;g.isDone=b}),98);
__d("MWPSearchIndexingSource",["I64","LSIntEnum","ReQL","ReQLSuspense"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("contacts")))}function b(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("threads")).filter(function(a){return d("I64").equal(a.threadType,d("LSIntEnum").ofNumber(2))}))}function c(a,b){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.table("participants")).filter(function(b){return!d("I64").equal(b.contactId,a)}).map(function(a){a=[a,d("ReQLSuspense").first(d("ReQL").fromTableAscending(b.table("contacts")).getKeyRange(a.contactId),f.id+":52")];return a}))}g.fetchContacts=a;g.fetchGroupThreads=b;g.fetchGroupParticipants=c}),98);
__d("MWPSearchOpenIndexer",["I64","MWPSearchOfflineOpenConversations","MWPSearchOfflineOpenConversations.bs","MWPSearchOfflineSearchTypes","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=new Map(),j=new Map();function k(a){var b=a.id;a=a.name;b=d("I64").to_string(b);a={category:{type:d("MWPSearchOfflineSearchTypes").MWPSearchType.Contact},content:a,id:b};d("MWPSearchOfflineOpenConversations").add(a);h.set(b,a)}function l(a){var b=h.get(a);if(b!=null){h["delete"](a);d("MWPSearchOfflineOpenConversations").remove(b);return}}function m(a){var b=a.threadKey;a=a.threadName;if(a==null)return;b=d("I64").to_string(b);a={category:{type:d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName},content:a,id:b};d("MWPSearchOfflineOpenConversations").add(a);i.set(b,a)}function n(a){var b=i.get(a);if(b!=null){i["delete"](a);d("MWPSearchOfflineOpenConversations").remove(b);return}}function o(a,b){if(b==null)return;var c=d("MWPSearchOfflineOpenConversations.bs").getGroupParticipantKey(a.threadKey,a.contactId);b=b.name;a.nickname!=null&&(b+=" "+a.nickname);a={category:{type:d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant},content:b.trim(),id:c};d("MWPSearchOfflineOpenConversations").add(a);j.set(c,a)}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("contacts")).getKeyRange(b.contactId)));return o(b,a)});return q.apply(this,arguments)}function r(a,b){a=d("MWPSearchOfflineOpenConversations.bs").getGroupParticipantKey(a,b);b=j.get(a);if(b!=null){j["delete"](a);d("MWPSearchOfflineOpenConversations").remove(b);return}}function a(a,b){switch(b.operation){case"add":return k(b.value);case"put":l(d("I64").to_string(a));return k(b.value);case"delete":return l(d("I64").to_string(a))}}function c(a,b){switch(b.operation){case"add":return m(b.value);case"put":n(d("I64").to_string(a));return m(b.value);case"delete":return n(d("I64").to_string(a))}}function e(a,c,d,e){switch(e.operation){case"add":return p(a,e.value);case"put":r(c,d);return p(a,e.value);case"delete":return b("Promise").resolve(r(c,d))}}function f(a,b,c,e){d("MWPSearchOfflineOpenConversations.bs").db.contents=a,b.forEach(k),c.forEach(m),e.forEach(function(a){return o(a[0],a[1])})}g.onContactChanged=a;g.onGroupThreadChanged=c;g.onGroupParticipantChanged=e;g.startInitialIndex=f}),98);
__d("MWPSearchSystem",["CurrentUser","FBLogger","I64","JSScheduler","LSClearTables","LSFactory","LSIntEnum","MWChatSearchInsertRankingContacts.bs","MWLSSyncRankings","MWPSearchIndexingSource","MWPSearchOpenIndexer","Promise","ReQL","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h={contents:!1},i={contents:!1},j={contents:!1},k=c("gkx")("2190");function a(a){if(!j.contents){j.contents=!0;d("JSScheduler").scheduleSpeculativeCallback(function(){d("MWChatSearchInsertRankingContacts.bs").insertRankingContacts(a);d("MWLSSyncRankings").sync(a);var e=d("I64").of_string(c("CurrentUser").getID());h.contents||(h.contents=!0,c("promiseDone")(b("Promise").all([d("MWPSearchIndexingSource").fetchContacts(a),k?d("MWPSearchIndexingSource").fetchGroupThreads(a):b("Promise").resolve([]),k?d("MWPSearchIndexingSource").fetchGroupParticipants(e,a):b("Promise").resolve([])]).then(function(b){var c=b[0];d("MWPSearchOpenIndexer").startInitialIndex(a,c,b[1],b[2])}),function(){i.contents=!0},function(a){c("FBLogger")("messenger_search").catching(a).mustfix("Error indexing contacts for search")}),d("ReQL").fromTableAscending(a.table("contacts")).subscribe(function(a,b){a=a.hd;d("MWPSearchOpenIndexer").onContactChanged(a,b)}),k&&(d("ReQL").fromTableAscending(a.table("threads")).filter(function(a){return d("I64").equal(a.threadType,d("LSIntEnum").ofNumber(2))}).subscribe(function(a,b){a=a.hd;d("MWPSearchOpenIndexer").onGroupThreadChanged(a,b)}),d("ReQL").fromTableAscending(a.table("participants")).filter(function(a){return!d("I64").equal(a.contactId,e)}).subscribe(function(b,e){var f=b.hd;b=b.tl.hd;c("promiseDone")(d("MWPSearchOpenIndexer").onGroupParticipantChanged(a,f,b,e))})))});return}}function e(a){return a.runInTransaction(function(a){return c("LSClearTables")(c("LSFactory")(a))},"readwrite")}function f(){if(d("MWLSSyncRankings").isDone()&&d("MWChatSearchInsertRankingContacts.bs").isDone())return i.contents;else return!1}g.makeAll=a;g.clearAll=e;g.isDone=f}),98);
__d("filterInstagramContactsMWChatSearchLocalEntries",["MWChatSearchIssueLightspeedQuery.bs"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return b===d("MWChatSearchIssueLightspeedQuery.bs").Surfaces.instagramAll?a:a.filter(function(a){return!a.isInstagramAccount})}g["default"]=a}),98);
__d("mwChatSearchPayloadDecoratorRemoveExcluded",[],(function(a,b,c,d,e,f){"use strict";function a(a){return function(b){var c=b.entries;b=babelHelpers.objectWithoutPropertiesLoose(b,["entries"]);return babelHelpers["extends"]({entries:c.filter(function(b){return!a.includes(b.key)})},b)}}f["default"]=a}),66);
__d("mwChatSearchPayloadEnumerate",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.entries;a=babelHelpers.objectWithoutPropertiesLoose(a,["entries"]);b=b.map(function(a,b){var c=a.key,d=a.label;a=a.rawData;return{key:c,label:d,rawData:babelHelpers["extends"]({},a,{renderIndex:b}),type:"entry"}});return babelHelpers["extends"]({entries:b},a)}f["default"]=a}),66);
__d("mwStaticSearchEntries",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b=h._("__JHASH__--dZZ_HGKAA__JHASH__",[h._param("query_value",a)]);return{key:a,label:b,rawData:{displayName:b,id:a,imageUrl:"",isContact:!1,isE2EE:!1,isEPD:!1,resultType:"messages",secondaryImageUrl:"",subtext:""},type:"entry"}}g.createMessageSearchEntry=a}),98);
__d("sortMWChatSearchLocalEntries",[],(function(a,b,c,d,e,f){"use strict";var g={group:1,message:2,messages:3,page:4,user:0};function a(a){var b={};for(var c=0;c<a.length;c++){var d=a[c];b[d.id]=(d=d.rankingScore)==null?void 0:d.score}return a.sort(function(a,c){var d=g[a.resultType],e=g[c.resultType];if(d!==e)return d-e;e=(d=b[a.id])!=null?d:0;d=(a=b[c.id])!=null?a:0;return d-e})}f["default"]=a}),66);
__d("MWChatSearchTypeaheadLightspeedSubscriptionDataSource",["FBLogger","LSIntEnum","MAWGating","MNetRankType","MWChatSearchFilteringUtils","MWChatSearchIssueLightspeedQuery.bs","MWLSSearchIssueSearchQuerySupportedTypes.bs","MWPSearchOfflineOpenConversations.bs","MWPSearchSystem","Promise","asyncToGeneratorRuntime","cr:3542","createMWChatSearchTypeaheadDataEntry","filterInstagramContactsMWChatSearchLocalEntries","gkx","mwChatSearchPayloadDecoratorRemoveExcluded","mwChatSearchPayloadEnumerate","mwStaticSearchEntries","promiseDone","relay-runtime/network/RelayObservable","sortMWChatSearchLocalEntries"],(function(a,b,c,d,e,f,g){"use strict";var h=c("gkx")("495"),i=10,j=10,k=d("MAWGating").isArmadillo()&&d("MAWGating").isTlcSearchEnabled();a=function(){function a(a){var b=a.database,e=a.excludedIDs;e=e===void 0?[]:e;var f=a.lightspeedSupportedTypes;f=f===void 0?d("MWLSSearchIssueSearchQuerySupportedTypes.bs").allSupportedTypes:f;var g=a.source;g=g===void 0?d("MWChatSearchIssueLightspeedQuery.bs").Surfaces.universal:g;var h=a.includeRecommendations;h=h===void 0?!0:h;var i=a.includeGroupSearch;i=i===void 0?!1:i;var j=a.includeMessageSearchEntry;j=j===void 0?!0:j;a=a.nullstateRankType;a=a===void 0?d("LSIntEnum").ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE):a;this.$1=[];this.$5=function(){};this.$1=e;this.$2=g===d("MWChatSearchIssueLightspeedQuery.bs").Surfaces.omnipickerArmadillo?d("MWLSSearchIssueSearchQuerySupportedTypes.bs").armadilloSupportedTypes:f;this.$3=g;this.$4=b;this.$6=h;this.$7=i;this.$8=j;this.$9=a;d("MWPSearchSystem").makeAll(b)}var e=a.prototype;e.resolveData=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.map(c("createMWChatSearchTypeaheadDataEntry"));b=[].concat(this.$8&&a.query.length?[d("mwStaticSearchEntries").createMessageSearchEntry(a.query)]:[],b);b=d("MWChatSearchFilteringUtils").dedupeByThreadKey(b);b=(yield d("MWChatSearchFilteringUtils").filterSearchResults(b,this.$4,!1,k));var e=c("mwChatSearchPayloadDecoratorRemoveExcluded")(this.$1);return c("mwChatSearchPayloadEnumerate")(e({entries:b,params:a}))});function e(b,c){return a.apply(this,arguments)}return e}();e.fetchNetwork=function(a){var e=this;this.$5();return c("relay-runtime/network/RelayObservable").create(function(f){if(a.query.length===0&&!e.$6){f.next({entries:[],params:a});f.complete();return}if(a.query.length===0){e.$5=d("MWChatSearchIssueLightspeedQuery.bs").requestRecommendations(e.$4,e.$2,e.$9,e.$7,e.$3,a,function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=c("filterInstagramContactsMWChatSearchLocalEntries")(b,e.$3);b=(yield e.resolveData(a,b));f.next(b);f.complete()});return function(a){return d.apply(this,arguments)}}(),h);return}var g=[],k=[],l=!1,m=b("Promise").allSettled([b("cr:3542")!=null?b("cr:3542").fetchResults(e.$2,e.$3,e.$7,a):b("Promise").resolve([]),e.$3!==d("MWChatSearchIssueLightspeedQuery.bs").Surfaces.broadcast?d("MWPSearchOfflineOpenConversations.bs").search(a.query,e.$7):b("Promise").resolve([])]).then(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var d=b[0];b=b[1];d=d.status==="fulfilled"?d.value:[];b=b.status==="fulfilled"?b.value:[];b=i<=0?b:b.slice(0,i);d=j<=0?d:d.slice(0,j);g=b.concat(d);g=c("sortMWChatSearchLocalEntries")(g);g=c("filterInstagramContactsMWChatSearchLocalEntries")(g,e.$3);b=(yield e.resolveData(a,g.concat(k)));l||f.next(b)});return function(a){return d.apply(this,arguments)}}())["catch"](function(a){c("FBLogger")("messenger_search").catching(a).mustfix("Error performing MWChatSearchIssueMAWFTSQuery.fetchResults")}),n=d("MWChatSearchIssueLightspeedQuery.bs").requestResults(e.$4,e.$2,e.$3,e.$7,a,function(h){k=h;h=a.query.length>0&&d("MWPSearchSystem").isDone()?m:b("Promise").resolve();c("promiseDone")(h["finally"](b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield e.resolveData(a,g.concat(k)));f.next(b);f.complete()})))});e.$5=function(){n(),l=!0}})};e.setExcludedIds=function(a){this.$1=a};return a}();g["default"]=a}),98);
__d("MWChatSearchIssueMAWFTSQuery.bs",["I64","LSContactBitOffset","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadTypeUtil","LSSearchGranularSurfaceType","LSSearchType","MAWBridgeSendAndReceive","MAWThreadId","MNetRankType","MWChatTemporarySearchResult.bs","MWInboxSecureContentSearch","MWLSThreadTitle","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("contacts")).getKeyRange(d("I64").of_string(b))).then(function(e){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("ig_contact_info")).getKeyRange(d("I64").of_string(b))).then(function(f){if(e!=null)return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("ranking_scores")).getKeyRange(d("I64").of_string(b),d("LSIntEnum").ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH))).then(function(a){return d("MWChatTemporarySearchResult.bs").fromContact((a=a)!=null?a:void 0,void 0,e,(a=f)!=null?a:void 0,"secure")})})})}function i(a,b,e,f){return d("MAWThreadId").toThreadKeyMaybe_DEPRECATED(a,b).then(function(b){if(b!=null)return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("threads")).getKeyRange(b)).then(function(a){var g;return{canViewerMessage:void 0,communityId:void 0,defaultE2eeThreadOneToOne:void 0,defaultE2eeThreads:void 0,displayName:(g=f)!=null?g:"",hasCutoverThread:void 0,id:e,imageUrl:"",isContact:!1,isE2EE:a!=null?d("LSMessagingThreadTypeUtil").isSecure(a.threadType):!1,isEligibleForCmInvite:void 0,isEPD:!1,isGroupsXacEligible:void 0,isInstagramAccount:!1,isInteropEligible:void 0,isInvitedToCmChannel:void 0,isVerified:!1,isViewerUnconnected:void 0,isWAEligible:void 0,otherUserId:void 0,rankingScore:void 0,restrictionType:void 0,resultIgid:void 0,resultType:d("MWChatTemporarySearchResult.bs").getResultType(d("LSIntEnum").ofNumber(c("LSSearchType").INTEGRATED_MESSAGE_SEARCH_THREAD)),searchSource:"secure",secondaryImageUrl:void 0,section:"",serverSearchResult:void 0,subtext:"",supportsE2eeSpamdStorage:void 0,threadJoinLinkHash:void 0,threadKey:b,threadType:void 0,waAddressable:void 0,waEligibility:void 0}})})}function j(a,c){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.table("mi_act_mapping_table")).getKeyRange(a)).then(function(a){if(a!=null)return d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.table("cutover_threads")).filter(function(b){return d("I64").equal(b.armadilloThreadId,a.jid)})).then(function(b){if(b!=null)return b.openThreadId;else return a.jid});else return b("Promise").resolve()})}function k(a){var b=a.score-1e-6;return{contactId:a.contactId,contactType:a.contactType,score:b,scoreIndex:a.scoreIndex,scoreType:a.scoreType}}function l(a,b){return j(a,b).then(function(e){var f=e!=null?e:a,g=e!=null;return d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.table("ranking_scores")).getKeyRange(f,d("LSIntEnum").ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH))).then(function(a){if(a!=null)if(g)return k(a);else return a})})}function m(a,b,e,f){var g;g=(g=b.threadDescription)!=null?g:"";d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchGranularSurfaceType").INSTAGRAM_ALL))&&(g=d("MWLSThreadTitle").getThreadTitleWithSecondaryNames(b.threadDescription,e,f,b.threadType).toString());return g}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g){e=(yield b("Promise").all([d("MAWThreadId").toThreadKeyMaybe_DEPRECATED(a,e),d("ReQLSuspense").firstExn(d("ReQL").fromTableAscending(a.table("_user_info")).map(function(a){return a.facebookUserId}),f.id+":237")]));var h=e[0];e=e[1];if(h==null)return;h=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("threads")).getKeyRange(h)));if(h==null||h.folderName!=="inbox")return;var i=(yield b("Promise").all([d("MWInboxSecureContentSearch").getThreadPics(h,e,a),d("MWInboxSecureContentSearch").getThreadParticipants(h,a),l(h.threadKey,a)])),j=i[0],k=i[1];i=i[2];var n=j[0];j=j[1];var o=d("LSMessagingThreadTypeUtil").isOneToOne(h.threadType),p=d("LSMessagingThreadTypeUtil").isGroup(h.threadType)?d("LSIntEnum").ofNumber(c("LSSearchType").GROUP):d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT),q=null;o===!0&&(q=(yield d("MWInboxSecureContentSearch").getOtherContactOrSelf(h.threadKey,e,a)));return{canViewerMessage:void 0,communityId:void 0,defaultE2eeThreadOneToOne:void 0,defaultE2eeThreads:void 0,displayName:d("MWLSThreadTitle").getDefaultThreadTitle(h.threadName,e,k,h.threadType).toString(),hasCutoverThread:void 0,id:d("I64").to_string(h.threadKey),imageUrl:n,isContact:o,isE2EE:d("LSMessagingThreadTypeUtil").isSecure(h.threadType),isEligibleForCmInvite:void 0,isEPD:!1,isGroupsXacEligible:void 0,isInstagramAccount:!1,isInteropEligible:void 0,isInvitedToCmChannel:void 0,isVerified:q!=null?d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(23),q):!1,isViewerUnconnected:void 0,isWAEligible:void 0,otherUserId:q?d("I64").to_string(q.id):void 0,rankingScore:i,restrictionType:void 0,resultIgid:void 0,resultType:d("MWChatTemporarySearchResult.bs").getResultType(p),searchSource:"secure",secondaryImageUrl:j,section:"",serverSearchResult:void 0,subtext:m(g,h,e,k),supportsE2eeSpamdStorage:void 0,threadJoinLinkHash:void 0,threadKey:h.threadKey,threadType:h.threadType,waAddressable:void 0,waEligibility:void 0}});return o.apply(this,arguments)}function p(a,b){var e=d("ReQLSuspense").firstExn(d("ReQL").fromTableAscending(a.table("_user_info")).map(function(a){return a.facebookUserId}),f.id+":334");return d("MAWThreadId").toThreadKeyMaybe_DEPRECATED(a,b).then(function(b){if(b!=null)return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("threads")).getKeyRange(b)).then(function(f){if(f!=null)return d("MWInboxSecureContentSearch").getThreadPics(f,e,a).then(function(a){var e;return{canViewerMessage:void 0,communityId:void 0,defaultE2eeThreadOneToOne:void 0,defaultE2eeThreads:void 0,displayName:(e=f.threadName)!=null?e:"",hasCutoverThread:void 0,id:d("I64").to_string(b),imageUrl:a[0],isContact:!1,isE2EE:d("LSMessagingThreadTypeUtil").isSecure(f.threadType),isEligibleForCmInvite:void 0,isEPD:!1,isGroupsXacEligible:void 0,isInstagramAccount:!1,isInteropEligible:void 0,isInvitedToCmChannel:void 0,isVerified:!1,isViewerUnconnected:void 0,isWAEligible:void 0,otherUserId:void 0,rankingScore:void 0,restrictionType:void 0,resultIgid:void 0,resultType:d("MWChatTemporarySearchResult.bs").getResultType(d("LSIntEnum").ofNumber(c("LSSearchType").GROUP)),searchSource:"secure",secondaryImageUrl:a[1],section:"",serverSearchResult:void 0,subtext:(e=f.threadDescription)!=null?e:"",supportsE2eeSpamdStorage:void 0,threadJoinLinkHash:void 0,threadKey:b,threadType:void 0,waAddressable:void 0,waEligibility:void 0}})})})}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d){var e=(yield c("LSDatabaseSingleton"));a=(yield b("Promise").all(a.map(function(a){switch(a.recordType){case"msg":return i(e,a.chatId,a.msgId,a.content);case"groupInfo":return p(e,a.threadId);case"contact":return h(e,a.fbid);case"participant":return n(e,a.threadId,d)}})));return a.filter(Boolean)});return r.apply(this,arguments)}function s(a){a=a.resultType;if(a==="user")return d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT);else if(a==="group")return d("LSIntEnum").ofNumber(c("LSSearchType").GROUP);else if(a==="message")return d("LSIntEnum").ofNumber(c("LSSearchType").INTEGRATED_MESSAGE_SEARCH_THREAD);else return d("LSIntEnum").ofNumber(c("LSSearchType").PAGE)}function a(a,e,f,g){return d("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{search:g.query},1e4).then(function(a){return q(a,e)}).then(function(e){return b("Promise").resolve(e.filter(function(b){b=s(b);var e=a.includes(b);b=f||!d("I64").equal(b,d("LSIntEnum").ofNumber(c("LSSearchType").GROUP));if(e)return b;else return!1}))})}g.fetchResults=a}),98);
__d("useMWChatSearchClearSearchResults",["LSClearTables","LSFactory","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function a(){var a=c("useReStore")();return h(function(){var b=a.runInTransaction(function(a){return c("LSClearTables")(c("LSFactory")(a))},"readwrite");c("promiseDone")(b)},[a])}g["default"]=a}),98);
__d("mwGroupEntriesForDisplay",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=new Map();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e,f,g;if(c){if(d>=a.length)break;g=a[d++]}else{d=a.next();if(d.done)break;g=d.value}g=g;e=(e=g.rawData.section)!=null?e:"";f=(f=b.get(e))!=null?f:[];f.push(g);b.set(e,f)}return b}f.mwGroupEntriesForDisplay=a}),66);
__d("mwChatSearchPayloadDecoratorRemoveDuplicates",["MWChatSearchResultType","MWXacGating.bs"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=!1);return function(e){var f=e.entries;e=babelHelpers.objectWithoutPropertiesLoose(e,["entries"]);var g=a.some(function(a){a=a.rawData;return a.resultType===c("MWChatSearchResultType").USER}),h=a.some(function(a){a=a.rawData;return!a.isInstagramAccount}),i=new Set(),j=new Set();a.forEach(function(a){return j.add(a.key)});b&&a.forEach(function(a){a.rawData.otherUserId!=null&&j.add(a.rawData.otherUserId)});f=f.filter(function(a){var e=a.key;a=a.rawData;if(g&&a.resultType!==c("MWChatSearchResultType").USER)return!1;if(!d("MWXacGating.bs").isGroupsEnabled()&&(h&&Boolean(a.isInstagramAccount)))return!1;a=!i.has(e)&&!j.has(e)&&!(b&&a.otherUserId!=null&&j.has(a.otherUserId));i.add(e);return a});return babelHelpers["extends"]({entries:f},e)}}g["default"]=a}),98);
__d("MWChatSearchLightspeedTypeaheadViewList.react",["MWCMLightSpeedChatTabActionViewItems.react","MWXText.react","getItemRoleFromCompositeRole","mwGroupEntriesForDisplay","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useMemo;function j(a){var b=a.activeEntryKey,d=a.children,e=a.entries,f=a.itemRole;a=a.title;return e!=null&&e.length>0?h.jsxs("li",{className:"xexx8yu xsyo7zv x18d9i69 x16hj40l",children:[a?h.jsx("div",{className:"x1y1aw1k x1sxyh0 xwib8y2 xurb0ha",children:h.jsx(c("MWXText.react"),{type:"entityHeaderMeta1",children:a})}):null,h.jsx("ul",{children:e.map(function(a,c){var e=b===a.key;return d({entry:a,index:c,isActive:e,itemRole:f})})})]}):null}j.displayName=j.name+" [from "+f.id+"]";function a(a){var b=a.ariaProps,e=a.children,f=a.entries,g=a.highlightedEntry,k=a.showActionItems;a=babelHelpers.objectWithoutPropertiesLoose(a,["ariaProps","children","entries","highlightedEntry","showActionItems"]);var l=g!=null?g.key:null;a=i(function(){return d("mwGroupEntriesForDisplay").mwGroupEntriesForDisplay(f)},[f]);var m=c("getItemRoleFromCompositeRole")(b.role);return h.jsxs("ul",{"data-testid":void 0,role:"listbox",children:[k&&h.jsx(c("MWCMLightSpeedChatTabActionViewItems.react"),{}),Array.from(a.entries()).map(function(a){var b=a[0];a=a[1];return h.jsx(j,{activeEntryKey:l,children:e,entries:a,itemRole:m,title:b},b)})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWThreadCreationUtil",["FBLogger","I64","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MAWGating","MAWVerifyThreadCutover","MWChatSearchFilteringUtils","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=k(a);b=d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(b.table("participants")).filter(function(a){return c.has(d("I64").to_string(a.contactId))}).map(function(a){return[d("I64").to_string(a.threadKey),d("I64").to_string(a.contactId)]}),f.id+":48");var e=[],g=new Map();b!=null&&b.forEach(function(b){var c=g.get(b[0]);c=c!=null?c+1:1;g.set(b[0],c);c===a.length&&e.push(b[0])});return e}function e(a,b,e){var f=!1;c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableDescending(b.table("threads").index("lastActivityTimestampMs")).filter(function(b){return a.includes(d("I64").to_string(b.threadKey))&&b.threadName==null})).then(function(a){a!=null&&(f=!0,e(d("LSMessagingThreadTypeUtil").isSecure(a.threadType)))})["catch"](function(a){c("FBLogger")("Armadillo Group TLC").mustfix("Issue getting and navigating to the most recent thread",a)}));return f}function h(a,b){var c=!0;b=d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(b.table("contacts")).filter(function(b){var c=a.has(d("I64").to_string(b.id));c&&a["delete"](d("I64").to_string(b.id));return c}),f.id+":120");for(var e=0;e<b.length;e++)if(b[e]!=null){var g=d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(80),b[e]);if(!g){c=!1;break}}return c}function i(a,b){var c=!0;b=d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(b.table("server_search_results")).filter(function(b){var c=a.has(b.resultId.toString());c&&a["delete"](b.resultId.toString());return c}),f.id+":155");for(var e=0;e<b.length;e++)if(b[e]!=null&&(b[e].defaultE2eeThreads===null||b[e].defaultE2eeThreads===!1)){c=!1;break}return c}function j(a,b,d){if(!d)return!1;d=k(a);a=h(d,b);if(d.size===0||!a)return a;a=i(d,b);if(d.size===0)return a;c("FBLogger")("Armadillo Group TLC").warn("Tokens not in the Contacts table or Server Search Results table");return!1}function k(a){var b=new Set();a.forEach(function(a){a=a.rawData.otherUserId!=null?a.rawData.otherUserId:a.key;b.add(a)});return b}function l(a){return a.rawData.hasCutoverThread===!0||m()&&a.rawData.defaultE2eeThreadOneToOne===!0}function m(){var a=d("MAWGating").isTlcSearchEnabled(),b=c("gkx")("3536");return a&&b}function n(a,c,e){return q(a,c).then(function(e){if(e!=null)if(a.rawData.isE2EE)return b("Promise").resolve(!0);else{e=a.rawData.otherUserId;e=e!=null?e:a.rawData.id;e=d("MAWVerifyThreadCutover").verifyThreadCutover(b("Promise").resolve(c),d("I64").of_string(e));return e}else return b("Promise").resolve(l(a))})}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=d("MWChatSearchFilteringUtils").getIsE2ee(a.rawData);if(e)return!0;e=a.rawData.id;c=(yield d("MAWVerifyThreadCutover").verifyThreadCutover(b("Promise").resolve(c),d("I64").of_string(e)));return c?!0:l(a)});return p.apply(this,arguments)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.table("threads")).getKeyRange(d("I64").of_string(a.key))));return b});return r.apply(this,arguments)}function s(a,b){if(a!=="group")return b?d("LSIntEnum").ofNumber(15):d("LSIntEnum").ofNumber(1);else return b?d("LSIntEnum").ofNumber(16):d("LSIntEnum").ofNumber(2)}function t(a,b,c,d,e){a.openTabOrInbox({clientThreadKey:b,threadKey:c,threadType:s(d,e)},"search")}g.getExistingThreadsWithTheTokens=a;g.maybeUpdateIsSecureBasedOnUnnamedRecentThread=e;g.checkE2EEligibilityForEachContact=j;g.passesWebSearchDefaultE2eeThreadCreationGating=m;g.getIsSecureBasedOnContactCapabilitiesForOneToOneThread=n;g.getIsSecureBasedOnContactCapabilitiesForOneToOneThreadV2=o;g.checkIfThreadExistsInThreadTable=q;g.navigateToThread=t}),98);